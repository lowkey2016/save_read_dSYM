<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.10 (454267)"/><meta name="altitude" content="15.08753108978271"/><meta name="author" content="jymn_chen@126.com"/><meta name="created" content="2015-10-27 07:43:15 +0000"/><meta name="latitude" content="23.06073107626086"/><meta name="longitude" content="113.402247463071"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2015-10-27 09:06:26 +0000"/><title>4566å¼€å‘ï¼ˆ1ï¼‰Crashåˆ†æ</title></head><body>
<div>1. æ¥å…¥å¯ä»¥æ•è·å¹¶ä¸ŠæŠ¥Crashä¿¡æ¯çš„SDKï¼Œå¦‚MTAï¼Œå‹ç›Ÿ</div>
<div><br/></div>
<div>2. archiveçš„æ—¶å€™æŠŠ dSYM æ–‡ä»¶ä¿å­˜ä¸‹æ¥</div>
<div><br/></div>
<div>3. åˆ†æ crash æ—¶ï¼ŒæŠŠ .appæ–‡ä»¶ã€.dSYMæ–‡ä»¶ã€read_dsym.sh æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œå¦‚ï¼š</div>
<div><img src="4566%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89Crash%E5%88%86%E6%9E%90.resources/2AD87F99-FE87-468B-BE32-0655C038A430.png" height="122" width="545"/></div>
<div>æ³¨ï¼š</div>
<div><img src="4566%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89Crash%E5%88%86%E6%9E%90.resources/D467637D-F931-4B1A-8A08-C5CF6ED51611.png" height="275" width="782"/></div>
<div><br/></div>
<div>read_dsym.shæ–‡ä»¶ï¼ˆå·²ç»é™„æœ‰æ³¨é‡Šï¼‰ï¼š</div>
<div><a href="4566%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89Crash%E5%88%86%E6%9E%90.resources/read_dsym.sh">read_dsym.sh</a></div>
<div><br/></div>
<div>4. crashå †æ ˆç¤ºä¾‹ï¼š</div>
<div>
<hr/></div>
<div><span style="font-size: 10px;">LastÂ ExceptionÂ Backtrace:</span></div>
<div><span style="font-size: 10px;">0Â  Â CoreFoundationÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x3051cf7eÂ __exceptionPreprocessÂ +Â 126</span></div>
<div><span style="font-size: 10px;">1Â  Â libobjc.A.dylibÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x3ac69ccaÂ objc_exception_throwÂ +Â 34</span></div>
<div><span style="font-size: 10px;">2Â  Â CoreFoundationÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x30453a34Â -[__NSArrayIÂ objectAtIndex:]Â +Â 172</span></div>
<div><span style="font-size: 10px;"><span style="color: rgb(255, 38, 0);">3Â  Â H5GameCenterÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x00105cb8Â 0x5f000Â +Â 683192</span></span></div>
<div><span style="font-size: 10px;">4Â  Â UIKitÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x32d3e4a6Â -[UIViewControllerÂ loadViewIfRequired]Â +Â 514</span></div>
<div><span style="font-size: 10px;">5Â  Â UIKitÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x32d3e264Â -[UIViewControllerÂ view]Â +Â 20</span></div>
<div><span style="font-size: 10px;">6Â  Â UIKitÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x32eca366Â -[UINavigationControllerÂ _startCustomTransition:]Â +Â 630</span></div>
<div><span style="font-size: 10px;">7Â  Â UIKitÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x32de7d5eÂ -[UINavigationControllerÂ _startDeferredTransitionIfNeeded:]Â +Â 414</span></div>
<div><span style="font-size: 10px;">8Â  Â UIKitÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x32de7b68Â -[UINavigationControllerÂ __viewWillLayoutSubviews]Â +Â 40</span></div>
<div><span style="font-size: 10px;">9Â  Â UIKitÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x32de7b00Â -[UILayoutContainerViewÂ layoutSubviews]Â +Â 180</span></div>
<div><span style="font-size: 10px;">10Â  UIKitÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x32d39d54Â -[UIView(CALayerDelegate)Â layoutSublayersOfLayer:]Â +Â 376</span></div>
<div><span style="font-size: 10px;">11Â  QuartzCoreÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x329b7626Â -[CALayerÂ layoutSublayers]Â +Â 138</span></div>
<div><span style="font-size: 10px;">12Â  QuartzCoreÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x329b2e36Â CA::Layer::layout_if_needed(CA::Transaction*)Â +Â 346</span></div>
<div><span style="font-size: 10px;">13Â  QuartzCoreÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x329b2cc8Â CA::Layer::layout_and_display_if_needed(CA::Transaction*)Â +Â 12</span></div>
<div><span style="font-size: 10px;">14Â  QuartzCoreÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x329b26daÂ CA::Context::commit_transaction(CA::Transaction*)Â +Â 226</span></div>
<div><span style="font-size: 10px;">15Â  QuartzCoreÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x329b24eaÂ CA::Transaction::commit()Â +Â 310</span></div>
<div><span style="font-size: 10px;">16Â  QuartzCoreÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x329ac218Â CA::Transaction::observer_callback(__CFRunLoopObserver*,Â unsignedÂ long,Â void*)Â +Â 52</span></div>
<div><span style="font-size: 10px;">17Â  CoreFoundationÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x304e8250Â __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__Â +Â 16</span></div>
<div><span style="font-size: 10px;">18Â  CoreFoundationÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x304e5bf4Â __CFRunLoopDoObserversÂ +Â 280</span></div>
<div><span style="font-size: 10px;">19Â  CoreFoundationÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x304e5f36Â __CFRunLoopRunÂ +Â 726</span></div>
<div><span style="font-size: 10px;">20Â  CoreFoundationÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x30450ebaÂ CFRunLoopRunSpecificÂ +Â 518</span></div>
<div><span style="font-size: 10px;">21Â  CoreFoundationÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x30450c9eÂ CFRunLoopRunInModeÂ +Â 102</span></div>
<div><span style="font-size: 10px;">22Â  GraphicsServicesÂ  Â  Â  Â  Â  Â  Â  Â  Â  0x3537365eÂ GSEventRunModalÂ +Â 134</span></div>
<div><span style="font-size: 10px;">23Â  UIKitÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x32d9d148Â UIApplicationMainÂ +Â 1132</span></div>
<div><span style="font-size: 10px;">24Â  H5GameCenterÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  0x0010b0caÂ 0x5f000Â +Â 704714</span></div>
<div><span style="font-size: 10px;">25Â  libdyld.dylibÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 0x3b176ab2Â tlv_initializerÂ +Â 2</span></div>
<div>
<hr/></div>
<div>æ‰¾åˆ° 4566 ç¨‹åºç›¸å…³çš„è¡Œï¼Œè·å–å…¶åç§»åœ°å€ï¼š683192ã€‚</div>
<div><br/></div>
<div>5. ./read_dsym.sh [arch] [offset address]</div>
<div>ä½¿ç”¨ä¾‹å­ï¼š</div>
<div>
<hr/></div>
<div><b><span style="font-size: 10px;">$Â ./read_dsym.shÂ armv7Â 683192</span></b></div>
<div><span style="font-size: 10px;">/Users/apple/Desktop/H5</span></div>
<div><span style="font-size: 10px;">----------------------------------------------------------------------</span></div>
<div><span style="font-size: 10px;">Â File:Â H5GameCenter.app.dSYM/Contents/Resources/DWARF/H5GameCenterÂ (armv7)</span></div>
<div><span style="font-size: 10px;">----------------------------------------------------------------------</span></div>
<div><span style="font-size: 10px;">LookingÂ upÂ address:Â 0x00000000000aacb8Â inÂ .debug_info...Â found!</span></div>
<div><span style="font-size: 10px;"><br/></span></div>
<div><span style="font-size: 10px;">0x0017bd46:Â CompileÂ Unit:Â lengthÂ =Â 0x00001fb7Â  versionÂ =Â 0x0002Â  abbr_offsetÂ =Â 0x00000000Â  addr_sizeÂ =Â 0x04Â  (nextÂ CUÂ atÂ 0x0017dd01)</span></div>
<div><span style="font-size: 10px;"><br/></span></div>
<div><span style="font-size: 10px;">0x0017bd51:Â TAG_compile_unitÂ [99]Â *</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â AT_producer(Â "AppleÂ LLVMÂ versionÂ 7.0.0Â (clang-700.1.76)"Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â AT_language(Â DW_LANG_ObjCÂ )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â AT_name(Â "/Users/apple/Desktop/ğŸ˜„/ğŸ¶/youmi/works/4566/H5GameCenter/H5GameCenter/Controllers/My/HGCAccountViewController.m"Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â AT_stmt_list(Â 0x00074861Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â AT_comp_dir(Â "/Users/apple/Desktop/ğŸ˜„/ğŸ¶/youmi/works/4566/H5GameCenter"Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â AT_APPLE_optimized(Â 0x01Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â AT_APPLE_major_runtime_vers(Â 0x02Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â AT_low_pc(Â 0x000aab00Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â AT_high_pc(Â 0x000ad5c2Â )</span></div>
<div><span style="font-size: 10px;"><br/></span></div>
<div><span style="font-size: 10px;">0x0017c67e:Â  Â  Â TAG_subprogramÂ [116]Â *</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_low_pc(Â 0x000aac20Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_high_pc(Â 0x000aace4Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_frame_base(Â r7Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_object_pointer(Â {0x0017c696}Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_name(Â "-[HGCAccountViewControllerÂ viewDidLoad]"Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_decl_file(Â "/Users/apple/Desktop/ğŸ˜„/ğŸ¶/youmi/works/4566/H5GameCenter/H5GameCenter/Controllers/My/HGCAccountViewController.m"Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_decl_line(Â 69Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_prototyped(Â 0x01Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_APPLE_optimized(Â 0x01Â )</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  Â  Â  Â  Â  Â AT_APPLE_isa(Â 0x01Â )</span></div>
<div><span style="font-size: 10px;">LineÂ tableÂ dirÂ :Â '/Users/apple/Desktop/ğŸ˜„/ğŸ¶/youmi/works/4566/H5GameCenter/H5GameCenter/Controllers/My'</span></div>
<div><span style="color: rgb(255, 38, 0);"><span style="font-size: 10px;">LineÂ tableÂ file:Â 'HGCAccountViewController.m'Â lineÂ 78,Â columnÂ 19Â withÂ startÂ addressÂ 0x00000000000aaca8</span></span></div>
<div><span style="font-size: 10px;"><br/></span></div>
<div><span style="font-size: 10px;">LookingÂ upÂ address:Â 0x00000000000aacb8Â inÂ .debug_frame...Â found!</span></div>
<div><span style="font-size: 10px;"><br/></span></div>
<div><span style="font-size: 10px;">0x00017fb0:Â FDE</span></div>
<div><span style="font-size: 10px;">Â  Â  Â  Â  length:Â 0x0000000c</span></div>
<div><span style="font-size: 10px;">Â  Â CIE_pointer:Â 0x00000000</span></div>
<div><span style="font-size: 10px;">Â  Â  start_addr:Â 0x000aac20Â -[HGCAccountViewControllerÂ viewDidLoad]</span></div>
<div><span style="font-size: 10px;">Â  Â  range_size:Â 0x000000c4Â (end_addrÂ =Â 0x000aace4)</span></div>
<div><span style="font-size: 10px;">Â  Instructions:Â 0x000aac20:Â CFA=sp</span></div>
<div>
<hr/></div>
<div>ç»“æœå¦‚ä¸Šï¼Œå…·ä½“çš„è¡Œæ•°å’Œåˆ—æ•°éƒ½åˆ—å‡ºæ¥äº†ã€‚</div>
<div><br/></div>
<div>6. æœ€åç§‘æ™®ä¸€ä¸‹ï¼š</div>
<div>ï¼ˆ1ï¼‰slide</div>
<div><img src="4566%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89Crash%E5%88%86%E6%9E%90.resources/7D411338-FC9D-49E6-A152-1A88E2217BBE.png" height="197" width="845"/></div>
<div>è¯¥åœ°å€åœ¨æ‰“åŒ…å‡º ipa æ˜¯å›ºå®šçš„ã€‚</div>
<div><br/></div>
<div>ï¼ˆ2ï¼‰load address</div>
<div><img src="4566%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89Crash%E5%88%86%E6%9E%90.resources/A7B160DF-9B82-4FF4-84E9-99200651C354.png" height="52" width="945"/></div>
<div><br/></div>
<div>ï¼ˆ3ï¼‰stack address</div>
<div><img src="4566%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89Crash%E5%88%86%E6%9E%90.resources/0112DF87-96B1-459D-B046-EDC725020C77.png" height="190" width="803"/></div>
<div>æ³¨æ„è¿™é‡Œ load address ä¸º 0x7c000</div>
<div><br/></div>
<div>ï¼ˆ4ï¼‰åç§»åœ°å€ï¼ˆè¿™é‡Œæˆ‘å°†å…¶å‘½åä¸º offset addressï¼‰</div>
<div>offset address = stack address - load address</div>
<div>offset address = symbol address - slide</div>
<div>
<hr/></div>
<div>çŒœæƒ³ï¼š</div>
<div>å¯¹äºä¸åŒçš„ä»£ç è¡Œï¼Œoffset addressæ˜¯éšæœºçš„ï¼Œä½†æ˜¯<span style="color: rgb(255, 38, 0);">å¯¹äºåŒä¸€è¡Œä»£ç ï¼Œoffset addressæ˜¯å›ºå®šçš„ï¼ˆæ— è®ºæ˜¯é™æ€è¿˜æ˜¯åŠ¨æ€è¿è¡Œï¼‰</span>ï¼Œæ‰€ä»¥æ— è®ºæ€ä¹ˆè¿è¡Œç”šè‡³é‡å¯è®¾å¤‡ï¼Œstack addresså’Œload addresséƒ½æ˜¯éšæœºçš„ï¼Œä½†æ˜¯ offset address å’Œ slide éƒ½æ˜¯ä¸å˜çš„ï¼Œæ‰€ä»¥ symbol address ä¹Ÿæ˜¯ä¸å˜çš„ï¼Œè€Œ symbol address å’Œä»£ç è¡Œæ•°åˆ—æ•°æ˜¯å”¯ä¸€å¯¹åº”çš„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ dwarfdump â€”lookup (symbol address) â€”arch xx xxx.dSYM è¿™æ¡å‘½ä»¤æ¥è§£æå‡ºå´©æºƒçš„ä»£ç ä½ç½®ã€‚</div>
<div><br/></div>
<div>éªŒè¯çŒœæƒ³ï¼š</div>
<div>æˆ‘åœ¨ 4566 çš„æˆ‘çš„é¡µé¢ä¸­æ•…æ„åˆ¶é€ äº†ä¸€ä¸ªæ•°ç»„è¶Šç•Œçš„crashï¼Œæ¯æ¬¡ç‚¹å‡»è¿›å…¥æˆ‘çš„é¡µé¢éƒ½ä¼šå´©æºƒï¼Œåˆ†åˆ«åœ¨ä¸‹åˆ2ç‚¹ï¼Œ3ç‚¹ï¼Œ4ç‚¹éƒ½åˆ¶é€ äº†åŒæ ·çš„crashï¼Œç»“æœå‘ç°å †æ ˆçš„åç§»åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¦‚ä¸‹ï¼š</div>
<div><img src="4566%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89Crash%E5%88%86%E6%9E%90.resources/D4087F5E-01F1-4611-A2BC-D6B548E7885B.png" height="398" width="734"/></div>
<div><img src="4566%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89Crash%E5%88%86%E6%9E%90.resources/D71F4D05-3D7A-4292-924C-E397855BE5C2.png" height="401" width="802"/></div>
<div><br/></div>
<div>é‡å¯è®¾å¤‡ï¼š</div>
<div><img src="4566%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89Crash%E5%88%86%E6%9E%90.resources/7E8EE494-5B66-4491-A9FA-85808C89EE07.png" height="401" width="803"/></div>
<div>
<hr/></div>
<div><br/></div>
<div>ï¼ˆ5ï¼‰symbol address</div>
<div>symbolÂ addressçš„å«ä¹‰ä¸ºå½“å‰çš„åç§»åœ°å€åœ¨dSYMæ–‡ä»¶ä¸­çš„å¯¹åº”å€¼ï¼Œè®¡ç®—æ–¹æ³•ï¼š</div>
<div>symbol address = slide + (stack address - load address)</div>
<div><br/></div>
<div>å‚è€ƒèµ„æ–™ï¼š</div>
<div><a href="evernote:///view/1725907511/s32/58d37b2e-029d-424b-b166-9b1eef3673e3/58d37b2e-029d-424b-b166-9b1eef3673e3/" style="color:#69aa35;">ã€å‚è€ƒèµ„æ–™ã€‘CrashLogä¸dSYMäºŒä¸‰äº‹</a></div>
<div><br/></div>
<div>è¿˜æœ‰ä¸€ä¸ªæ¯”ä¸ä¸Š read_dsym.sh å¥½ç”¨çš„å·¥å…·ï¼š</div>
<div><a href="http://answerhuang.duapp.com/index.php/2014/07/06/dsym_tool/">http://answerhuang.duapp.com/index.php/2014/07/06/dsym_tool/</a></div>
<div><br/></div>
</body></html>